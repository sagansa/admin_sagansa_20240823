{
    "conflicts": [
        {
            "id": "e3718c1c-0c82-4c17-931a-f612d2b160aa",
            "currentContent": "<?php\n\nnamespace App\\Policies;\n\nuse App\\Models\\User;\nuse App\\Models\\DeliveryAddress;\nuse Illuminate\\Auth\\Access\\HandlesAuthorization;\nuse Illuminate\\Support\\Facades\\Auth;\n\nclass DeliveryAddressPolicy\n{\n    use HandlesAuthorization;\n\n    /**\n     * Determine whether the user can view any models.\n     */\n    public function viewAny(User $user): bool\n    {\n        return $user->can('view_any_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can view the model.\n     */\n    public function view(User $user, DeliveryAddress $deliveryAddress): bool\n    {\n        // return $user->can('view_panel::delivery::address');\n\n        // Cek apakah ada transaksi yang terkait dengan DeliveryAddress\n        if ($deliveryAddress->salesOrders()->exists()) {\n            // Jika ada transaksi, tidak bisa update\n            return $user->can('update_panel::delivery::address');\n        }\n\n        // Jika tidak ada transaksi, bisa update\n        return false;\n    }\n\n    /**\n     * Determine whether the user can create models.\n     */\n    public function create(User $user): bool\n    {\n        return $user->can('create_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can update the model.\n     */\n    public function update(User $user, DeliveryAddress $deliveryAddress): bool\n    {\n        // return $user->can('update_panel::delivery::address');\n\n        // Cek apakah ada transaksi yang terkait dengan DeliveryAddress\n        if ($deliveryAddress->salesOrders()->exists()) {\n            // Jika ada transaksi, tidak bisa update\n            return Auth::user()->hasRole('admin');\n        }\n\n        // Jika tidak ada transaksi, bisa update\n        return $user->can('update_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can delete the model.\n     */\n    public function delete(User $user, DeliveryAddress $deliveryAddress): bool\n    {\n        return $user->can('delete_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can bulk delete.\n     */\n    public function deleteAny(User $user): bool\n    {\n        return $user->can('delete_any_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can permanently delete.\n     */\n    public function forceDelete(User $user, DeliveryAddress $deliveryAddress): bool\n    {\n        return $user->can('force_delete_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can permanently bulk delete.\n     */\n    public function forceDeleteAny(User $user): bool\n    {\n        return $user->can('force_delete_any_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can restore.\n     */\n    public function restore(User $user, DeliveryAddress $deliveryAddress): bool\n    {\n        return $user->can('restore_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can bulk restore.\n     */\n    public function restoreAny(User $user): bool\n    {\n        return $user->can('restore_any_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can replicate.\n     */\n    public function replicate(User $user, DeliveryAddress $deliveryAddress): bool\n    {\n        return $user->can('replicate_panel::delivery::address');\n    }\n\n    /**\n     * Determine whether the user can reorder.\n     */\n    public function reorder(User $user): bool\n    {\n        return $user->can('reorder_panel::delivery::address');\n    }\n}\n",
            "newContent": "<?php\n\nnamespace App\\Policies;\n\nuse App\\Models\\User;\nuse App\\Models\\DeliveryAddress;\n\nclass DeliveryAddressPolicy\n{\n    /**\n     * Determine whether the user can view any models.\n     */\n    public function viewAny(User $user): bool\n    {\n        return true;\n    }\n\n    /**\n     * Determine whether the user can view the model.\n     */\n    public function view(User $user, DeliveryAddress $model): bool\n    {\n        return true;\n    }\n\n    /**\n     * Determine whether the user can create models.\n     */\n    public function create(User $user): bool\n    {\n        return true;\n    }\n\n    /**\n     * Determine whether the user can update the model.\n     */\n    public function update(User $user, DeliveryAddress $model): bool\n    {\n        return true;\n    }\n\n    /**\n     * Determine whether the user can delete the model.\n     */\n    public function delete(User $user, DeliveryAddress $model): bool\n    {\n        return true;\n    }\n\n    /**\n     * Determine whether the user can restore the model.\n     */\n    public function restore(User $user, DeliveryAddress $model): bool\n    {\n        return true;\n    }\n\n    /**\n     * Determine whether the user can permanently delete the model.\n     */\n    public function forceDelete(User $user, DeliveryAddress $model): bool\n    {\n        return true;\n    }\n}\n"
        }
    ]
}